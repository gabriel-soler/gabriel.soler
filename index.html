<script>
  const carousel = document.querySelector('.carousel');
  const imgs = document.querySelectorAll('.carousel img');
  const total = imgs.length;

  let index = 0;

  function updateCarousel() {
    carousel.style.transform = `translateX(${-index * 320}px)`;
  }

  // FLECHA DERECHA — avanzar solo si no estamos al final
  document.querySelector('.next').onclick = () => {
    if (index < total - 1) {
      index++;
      updateCarousel();
    }
  };

  // FLECHA IZQUIERDA — retroceder solo si no estamos al principio
  document.querySelector('.prev').onclick = () => {
    if (index > 0) {
      index--;
      updateCarousel();
    }
  };

  /* MODAL */
  const modal = document.getElementById('myModal');
  const modalImg = document.getElementById('modalImg');
  const closeModal = document.querySelector('.close');
  const modalPrev = document.querySelector('.modal-prev');
  const modalNext = document.querySelector('.modal-next');

  let modalIndex = 0;

  imgs.forEach((img, i) => {
    img.addEventListener('click', () => {
      modal.style.display = "block";
      modalImg.src = img.src;
      modalIndex = i;
    });
  });

  closeModal.onclick = () => modal.style.display = "none";

  modalPrev.onclick = () => {
    modalIndex = (modalIndex - 1 + total) % total;
    modalImg.src = imgs[modalIndex].src;
  };

  modalNext.onclick = () => {
    modalIndex = (modalIndex + 1) % total;
    modalImg.src = imgs[modalIndex].src;
  };

  modal.onclick = (e) => {
    if (e.target === modal) modal.style.display = "none";
  };
</script>
